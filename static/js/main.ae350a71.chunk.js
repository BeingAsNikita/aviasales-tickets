(this["webpackJsonpaviaseils-tikets"]=this["webpackJsonpaviaseils-tikets"]||[]).push([[0],{27:function(e,t,a){e.exports=a(66)},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(5),s=a.n(c),i=(a(32),a(13)),l=(a(33),a(34),a(35),function(e){var t=e.type,a=e.name,n=e.text,c=e.filters,s=e.onChange;return r.a.createElement("li",{className:"customCheckbox"},r.a.createElement("label",{className:"customCheckbox__label",htmlFor:a},r.a.createElement("input",{className:"visually-hidden",type:t,name:a,id:a,onChange:function(e){return s(e)},checked:c[a]}),r.a.createElement("span",{className:"customCheckbox__fake"}),r.a.createElement("span",null,n)))}),o=[{name:"all",type:"checkbox",text:"\u0412\u0441\u0435"},{name:"no",type:"checkbox",text:"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"},{name:"one",type:"checkbox",text:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430"},{name:"two",type:"checkbox",text:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"},{name:"three",type:"checkbox",text:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"}],u=function(e){var t=e.onChange,a=e.filters;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"transferFilter"},r.a.createElement("p",{className:"transferFilter__title"},"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"),r.a.createElement("ul",null,o.map((function(e){return r.a.createElement(l,Object.assign({},e,{key:e.name,filters:a,onChange:t}))})))))},p=(a(36),function(e){e.type,e.name,e.text;var t=e.onChange,a=e.filters;return r.a.createElement("div",{className:"priceFilter"},r.a.createElement("label",{className:"priceFilter__label",htmlFor:"isCheap"},r.a.createElement("input",{className:"visually-hidden",type:"radio",name:"price",id:"isCheap",checked:"isCheap"===a.price,onChange:function(e){return t(e)}}),r.a.createElement("span",{className:"priceFilter__fake priceFilter__fake--left"},"\u0421\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0435\u0432\u044b\u0439")),r.a.createElement("label",{className:"priceFilter__label",htmlFor:"isFast"},r.a.createElement("input",{className:"visually-hidden",type:"radio",name:"price",id:"isFast",checked:"isFast"===a.price,onChange:function(e){return t(e)}}),r.a.createElement("span",{className:"priceFilter__fake priceFilter__fake--right"}," \u0421\u0430\u043c\u044b\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439")))}),m=(a(37),a(38),function(e){return e<10?"0"+e:e+""}),d=function(e,t){var a=new Date(e),n=Math.floor((60*a.getHours()+a.getMinutes()+t)/60),r=Math.floor(60*((60*a.getHours()+a.getMinutes()+t)/60-n));return n>24&&(n-=24),{departureHour:m(a.getHours()),departureMinutes:m(a.getMinutes()),arrivalHour:m(n),arrivalMinutes:m(r),durationHours:m(Math.floor(t/60)),durationMinutes:m(t%60)}},f={0:"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a",1:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430",2:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",3:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"},E=function(e){var t=e.price,a=e.carrier,n=e.segments,c=d(n[0].date,n[0].duration),s=d(n[1].date,n[1].duration);return r.a.createElement("li",{className:"ticket"},r.a.createElement("div",{className:"ticket__header"},r.a.createElement("div",{className:"ticket__price"},"".concat(t," \u0420")),r.a.createElement("div",{className:"ticket__logo"},r.a.createElement("img",{src:"https://pics.avs.io/99/36/".concat(a,".png"),alt:"logo ".concat(a)}))),r.a.createElement("div",{className:"ticket__wrap"},r.a.createElement("div",{className:"ticket__inner"},r.a.createElement("span",{className:"ticket__subtitle"},"".concat(n[0].origin," \u2013 ").concat(n[0].destination)),r.a.createElement("span",null,"\n                    ".concat(c.departureHour,":").concat(c.departureMinutes," \u2013 \n                    ").concat(c.arrivalHour,":").concat(c.arrivalMinutes," \n                    "))),r.a.createElement("div",{className:"ticket__inner"},r.a.createElement("span",{className:"ticket__subtitle"},"\u0412 \u043f\u0443\u0442\u0438"),r.a.createElement("span",null,"\n                        ".concat(c.durationHours,"\u0447 ").concat(c.durationMinutes,"\u043c\n                    "))),r.a.createElement("div",{className:"ticket__inner"},r.a.createElement("span",{className:"ticket__subtitle"},"".concat(f[n[0].stops.length])),r.a.createElement("span",null,n[0].stops.join()))),r.a.createElement("div",{className:"ticket__wrap"},r.a.createElement("div",{className:"ticket__inner"},r.a.createElement("span",{className:"ticket__subtitle"},"".concat(n[1].origin," \u2013 ").concat(n[1].destination)),r.a.createElement("span",null,"\n                    ".concat(s.departureHour,":").concat(s.departureMinutes," \u2013 \n                    ").concat(s.arrivalHour,":").concat(s.arrivalMinutes," \n                    "))),r.a.createElement("div",{className:"ticket__inner"},r.a.createElement("span",{className:"ticket__subtitle"},"\u0412 \u043f\u0443\u0442\u0438"),r.a.createElement("span",null,"\n                        ".concat(s.durationHours,"\u0447 ").concat(s.durationMinutes,"\u043c\n                    "))),r.a.createElement("div",{className:"ticket__inner"},r.a.createElement("span",{className:"ticket__subtitle"},"".concat(f[n[1].stops.length])),r.a.createElement("span",null,n[1].stops.join()))))},h=function(e){var t=e.tickets.slice(0,5).map((function(e){return r.a.createElement(E,Object.assign({},e,{key:e.price+e.carrier}))}));return r.a.createElement("ul",null,t)},_=a(8),g=a(4),k=a.n(g),v=a(12),b=a(2),N=a(24),C=a(25),y=a.n(C),S=N.create({baseURL:"https://front-test.beta.aviasales.ru/"});y()(S,{retries:2});var O=function(){return S.get("search")},I=function(e){return S.get("tickets?searchId=".concat(e))},j=a(6),x=function(e,t){var a=t;return"isCheap"===e.price?(a=a.sort((function(e,t){return e.price-t.price})),e.all||(e.no?a=a.filter((function(e){return 0===e.segments[0].stops.length})):e.one?a=a.filter((function(e){return 1===e.segments[0].stops.length})):e.two?a=a.filter((function(e){return 2===e.segments[0].stops.length})):e.three&&(a=a.filter((function(e){return 3===e.segments[0].stops.length})))),a):"isFast"===e.price?(a=a.sort((function(e,t){return e.segments[0].duration-t.segments[0].duration})),e.all||(e.no?a=a.filter((function(e){return 0===e.segments[0].stops.length})):e.one?a=a.filter((function(e){return 1===e.segments[0].stops.length})):e.two?a=a.filter((function(e){return 2===e.segments[0].stops.length})):e.three&&(a=a=a.filter((function(e){return 3===e.segments[0].stops.length})))),a):void 0},F={initialized:!1,searchId:null,tickets:[],stop:!1},M=function(e){return{type:"GET_SEARCHING_ID",payload:e}},w=function(e,t){return{type:"GET_TICKETS_SUCCESS",payload:{data:e,stop:t}}},T=function(e){return function(){var t=Object(v.a)(k.a.mark((function t(a){var n;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I(e);case 2:n=t.sent,a(w(n.data.tickets,n.data.stop)),a({type:"INITIALIZED_SUCCESS"});case 5:if(!1!==n.data.stop){t.next=12;break}return t.next=8,I(e);case 8:n=t.sent,a(w(n.data.tickets,n.data.stop)),t.next=5;break;case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZED_SUCCESS":return Object(b.a)(Object(b.a)({},e),{},{initialized:!0});case"GET_SEARCHING_ID":return Object(b.a)(Object(b.a)({},e),{},{searchId:t.payload});case"GET_TICKETS_SUCCESS":return Object(b.a)(Object(b.a)({},e),{},{tickets:e.tickets.concat(t.payload.data),stop:t.payload.stop});case"FILTER_SUCCESS":return Object(b.a)(Object(b.a)({},e),{},{tickets:x(t.payload,e.tickets)});default:return e}},U=a(7),D=a.n(U),G=(a(65),function(e){e.tickets;return r.a.createElement("div",{className:"preloader"},r.a.createElement("img",{src:D.a,alt:"logo"}))}),L=Object(_.b)((function(e){return{initialized:e.app.initialized,searchId:e.app.searchId,tickets:e.app.tickets,stop:e.app.stop}}),{getSearchId:function(){return function(){var e=Object(v.a)(k.a.mark((function e(t){var a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:a=e.sent,t(M(a.data.searchId)),t(T(a.data.searchId));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},filterSuccess:function(e){return{type:"FILTER_SUCCESS",payload:e}},getTickets:T})((function(e){var t=e.tickets,a=e.getSearchId,c=e.initialized,s=(e.filterSuccess,e.searchId),l=(e.stop,Object(n.useState)({price:"isCheap",all:!1,no:!1,one:!1,two:!1,three:!1})),o=Object(i.a)(l,2),m=o[0],d=o[1],f=Object(n.useState)(null),E=Object(i.a)(f,2),_=E[0],g=E[1];Object(n.useEffect)((function(){a(),T(s)}),[]),Object(n.useEffect)((function(){g(t)}),[t]);var k=function(e){var a=function(e,t){var a=Object(b.a)(Object(b.a)({},t),{},Object(j.a)({},e,!t[e]));if("isFast"!==e&&"isCheap"!==e||(a.price=e),"all"===e&&!1===t.all)for(var n in a)"boolean"===typeof a[n]&&(a[n]=!0);else if("all"===e&&!0===t.all)for(var r in a)"boolean"===typeof a[r]&&(a[r]=!1);return a}(e.target.id,m);d(a),console.log(a),g(x(a,t))};return r.a.createElement("div",{className:"app"},r.a.createElement("img",{src:D.a,alt:"logo"}),c?r.a.createElement("div",{className:"app__container"},r.a.createElement("div",{className:"sidebar"},r.a.createElement(u,{filters:m,onChange:k})),r.a.createElement("div",{className:"content"},r.a.createElement(p,{filters:m,onChange:k}),r.a.createElement(h,{tickets:_,filters:m}))):r.a.createElement(G,null))})),R=a(3),z=a(26),A=Object(R.c)({app:H}),J=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||R.d,K=Object(R.e)(A,J(Object(R.a)(z.a)));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(_.a,{store:K},r.a.createElement(L,null))),document.getElementById("root"))},7:function(e,t,a){e.exports=a.p+"static/media/logo.0c089234.svg"}},[[27,1,2]]]);
//# sourceMappingURL=main.ae350a71.chunk.js.map